{% extends "base.html" %}
{% block content %}
<div class="card">
  <h1>New Booking</h1>
  {% if not clients or not trips %}
    <p>You need at least one client and one trip to create a booking.</p>
    <ul>
      <li><a href="/clients/new">Create a client</a></li>
      <li><a href="/trips/new">Create a trip</a></li>
    </ul>
  {% else %}
  <form method="post" action="/bookings">
    <div class="grid cols-2">
      <div>
        <label>Client *</label>
        <select name="client_id" class="input" required>
          <option value="">-- choose client --</option>
          {% for c in clients %}
            <option value="{{ c.id }}">{{ c.first_name }} {{ c.last_name }} ({{ c.email or c.phone or 'no contact' }})</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label>Trip *</label>
        <select name="trip_id" class="input" required>
          <option value="">-- choose trip --</option>
          {% for t in trips %}
            <option value="{{ t.id }}">{{ t.name }}{% if t.start_date %} â€” {{ t.start_date }}{% endif %}</option>
          {% endfor %}
        </select>
      </div>
    </div>
    <div class="toolbar">
      <button type="submit" class="btn primary">Create</button>
      <a href="/bookings" class="btn ghost">Cancel</a>
    </div>
  </form>
  {% endif %}
</div>
{% endblock %}

{% extends "base.html" %}
{% block content %}
<div class="card">
  <h1>{{ client.first_name }} {{ client.last_name }}</h1>
  <div class="kpi">
    <div class="pill">Email: {{ client.email or '-' }}</div>
    <div class="pill">Phone: {{ client.phone or '-' }}</div>
    <div class="pill">DOB: {{ client.dob.strftime('%d-%m-%Y') if client.dob else '-' }}</div>
  </div>
</div>
<div class="card">
  <form method="post" action="/bookings" class="toolbar">
    <input type="hidden" name="client_id" value="{{ client.id }}">
    <select name="trip_id" class="input" required>
      {% for t in trips %}
      <option value="{{ t.id }}">{{ t.name }}{% if t.start_date %} â€” {{ t.start_date }}{% endif %}</option>
      {% endfor %}
    </select>
    <button type="submit" class="btn primary">Add to Trip</button>
  </form>
  <table class="table">
    <thead>
      <tr>
        <th>Trip</th>
        <th>Status</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody>
      {% for b in client.bookings %}
      <tr>
        <td><a href="/trips/{{ b.trip.id }}">{{ b.trip.name }}</a></td>
        <td>{{ b.status or "" }}</td>
        <td>{{ b.notes or "" }}</td>
      </tr>
      {% else %}
      <tr><td colspan="3">No bookings yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<p><a href="/clients">Back to list</a></p>
{% endblock %}
